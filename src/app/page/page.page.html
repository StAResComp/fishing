<ion-header [translucent]="true">
  <ion-toolbar [ngSwitch]="page.toLowerCase()">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title *ngSwitchCase="'f1entrieslist'">FISH1 Entries</ion-title>
    <ion-title *ngSwitchDefault>{{ page }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">{{ page }}</ion-title>
    </ion-toolbar>
  </ion-header>

  <div id="container" class="container">

    <div *ngIf="page.toLowerCase() == 'settings'">
      <form *ngIf="!orderSent" #form="ngForm" novalidate (ngSubmit)="saveSettings()">
        <div *ngFor="let key of keys" class="form-group">
          <label for="{{ key }}">{{ getDisplayKey(key) }}: </label>
          <input class="form-control" name="{{ key }}" [value]="settings.get(key)" (change)="settings.set(key, $event.target.value)" />
        </div>
        <button class="btn btn-primary m-1" type="submit">Save Settings</button>
      </form>
    </div>

    <div *ngIf="page.toLowerCase() == 'home'">
      <ion-card>
        <form #form="ngForm" novalidate (ngSubmit)="recordCatch()">
          <ion-list>
            <ion-item>
              <ion-label>Species:</ion-label>
              <ion-select>
                <ion-select-option *ngFor="let species of getSpecies()" value="species.id">{{ species.name }}</ion-select-option>
              </ion-select>
            </ion-item>
            <ion-item>
              <ion-label>No. caught:</ion-label>
              <ion-input type="number"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label>No. retained:</ion-label>
              <ion-input type="number"></ion-input>
            </ion-item>
          </ion-list>
          <ion-button expand="block">Record Catch</ion-button>
        </form>
      </ion-card>
      <ion-card *ngFor="let catch of getCatches()">
        <ion-card-content>
          {{ catch.date }} {{ catch.time }} <br />
          {{ catch.species }}: Retained {{ catch.retained }} of {{ catch.caught }}
        </ion-card-content>
      </ion-card>
      <!--<button (click)="login()" class="btn btn-primary m-1">Login</button>-->
      <!--<button (click)="refresh()" class="btn btn-primary m-1">Refresh Token</button>-->
      <!--<button (click)="checkTokens()" class="btn btn-primary m-1">Check stored tokens</button>-->
      <!--<ul>-->
      <!--<li>Access token: {{ accessToken }}</li>-->
      <!--<li>Access token expiry: {{ accessTokenExpiry }} seconds</li>-->
      <!--<li>Refresh token: {{ refreshToken }}</li>-->
      <!--</ul>-->
    </div>

    <div *ngIf="page.toLowerCase() == 'f1entrieslist'">
      <ion-card>
        <ion-button (click)="recordEntry()" expand="block">Create New Entry</ion-button>
        <ion-button (click)="generateForm()" expand="block">Generate Form</ion-button>
      </ion-card>
      <ion-card *ngFor="let entry of getF1Entries()">
        <ion-card-content>
          <ion-grid>
            <ion-row>
              <ion-col>
                <div>
                  {{ entry.date }} <br /> {{ entry.species }}
                </div>
              </ion-col>
              <ion-col class="ion-text-end">
                <ion-button (click)="recordEntry()" size="small">Details</ion-button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-card-content>
      </ion-card>
    </div>

    <div *ngIf="page.toLowerCase() == 'f1-entry-detail'">
    </div>

    <div *ngIf="page.toLowerCase() == 'f1-form-gen'">
    </div>

    <div *ngIf="page.toLowerCase() == 'wildlife'">
    </div>

  </div>
</ion-content>
